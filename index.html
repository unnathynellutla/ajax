<!doctype html>
<html>
<head>
	<title>Studio Ghibli API Data</title>
	<meta charset="utf-8"/>
	<script>
		function loadMovies() {
			var ajaxRequest = new XMLHttpRequest();
			ajaxRequest.open("GET", "https://ghibliapi.herokuapp.com/films", true);
			
			ajaxRequest.onreadystatechange = function() {
				document.getElementById("movies").innerHTML = "Readystate changed"; 
			
				if(ajaxRequest.readyState == 1){
					document.getElementById("movies").innerHTML = "Connected";
				}
				else if(ajaxRequest.readyState == 2){
				document.getElementById("movies").innerHTML = "Request received by server.";
				}
				else if(ajaxRequest.readyState == 3){
					document.getElementById("movies").innerHTML = "Processing request.";
				}
				else if(ajaxRequest.readyState == 4){
					document.getElementById("movies").innerHTML =  "Done loading! " + ajaxRequest.status;
					if(ajaxRequest.status == 200){
						result = ajaxRequest.responseText;
						films = JSON.parse(result);
						strHTML = "<ul>";
						films.forEach(function(film) { 
					 		strHTML += "<li>" + film.title + "<br>" + film.description + "</li>";
						}) 
						strHTML += "</ul>";
						document.getElementById("movies").innerHTML = strHTML;
					}
				} else {
					document.getElementById("movies").innerHTML =  "Wrong";
				}
			}
			
			ajaxRequest.send();
		};
		
	</script>
</head>


<body onload="loadMovies()">

	<h1>Studio Ghibli Movies</h1>
	<div id="movies">Loading...</div>
</body>
</html>
